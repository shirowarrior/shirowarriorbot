// Dependencies
const chai = require('chai')
const expect = chai.expect
const chaiAsPromised = require('chai-as-promised')
chai.use(chaiAsPromised)

// Local Dependencies
const OWStats = require('../src/index.js')

describe('Overwatch Stats', () => {
  describe('Invalid BattleTag', () => {
    it('throws error', () => {
      let badstats = () => new OWStats('notAbattletag')
      expect(badstats).to.throw(Error)
    })
  })

  describe('Valid BattleTag', () => {
    it('does not throw error', () => {
      let stats = () => new OWStats('lolPants#2204')
      expect(stats).to.not.throw(Error)
    })
    it('be rejected with invalid region', () => {
      let stats = () => new OWStats('lolPants#2204')
      expect(stats().getStats('aa')).to.be.rejected
    })
    it('not be rejected with valid region', () => {
      let stats = () => new OWStats('lolPants#2204')
      expect(stats().getStats('eu')).to.be.fulfilled
    })
  })
})
